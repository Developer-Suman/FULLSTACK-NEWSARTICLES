name: SSH Connection Test

on:
  push:
    branches:
      - main  # or the branch you want to trigger this workflow

jobs:
  ssh-test:
    runs-on: windows-latest

    steps:
      - name: Setup known hosts
        run: |
          # Create .ssh directory if it doesn't exist
          mkdir -p %USERPROFILE%\.ssh
          
          # Add known host entry
          echo "47.129.30.248 ecdsa-sha2-nistp256 AAAAE2VjZHNhLXNoYTItbmlzdHAyNTYAAAAIbmlzdHAyNTYAAABBBPY4Sa4lMnJ7EXf+wT3/nRKvT2SSLlLsHWKk46GKDink41JhLGEVx6IKtvi0vMMlNvG3LwBvHzS8yvunELQOpDM=" > %USERPROFILE%\.ssh\known_hosts

      - name: Verify the Connection To Remote Server
        run: |
          ssh -o StrictHostKeyChecking=no -o LogLevel=VERBOSE ${{ secrets.REMOTE_USER }}@${{ secrets.REMOTE_HOST }} "echo SSH connection successful"
